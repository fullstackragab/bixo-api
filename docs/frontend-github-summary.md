# Public Work Summary - Frontend Implementation Guide

## Overview

The **Public Work Summary** is an optional profile section generated by admin action. It provides additional context based on publicly available project descriptions.

This section is supportive and editable by the candidate.

---

## Framing Guidelines

### Terminology

| Internal (code/API) | External (UI) |
|---------------------|---------------|
| `githubSummary` | "Public work summary" |
| Generate summary | "Generate public work summary" |
| GitHub enrichment | (never shown) |

### What to AVOID in UI

- "AI-generated"
- "GitHub analysis"
- "Automated summary"
- Generation timestamps
- Scoring, ratings, or judgments

The summary should feel like **human-curated editorial context**.

---

## API Endpoints

### Admin: Generate Summary

**POST** `/api/admin/candidates/{id}/github-summary`

### Candidate: Get Profile

**GET** `/api/candidates/profile`

New fields:
```typescript
{
  githubSummary?: string;
  githubSummaryGeneratedAt?: string;  // Used internally, not shown in UI
}
```

### Candidate: Edit Summary

**PUT** `/api/candidates/github-summary`

```typescript
{ summary: string }
```

---

## Visibility Rules

| User | Can See? | Can Edit? | Can Generate? |
|------|----------|-----------|---------------|
| Candidate (own profile) | Yes (if exists) | Yes | No |
| Admin | Yes | No | Yes |
| Company (shortlist) | Yes (after delivery) | No | No |
| Other candidates | No | No | No |

---

## Candidate Profile UI

**Location:** `app/candidate/profile/page.tsx`

### Section Title

```
Public work summary
```

Or for increased trust:
```
Public work summary (based on project documentation)
```

### Description (small, muted text)

```
This summary is based on publicly available project descriptions and can be edited.
```

### Layout

```tsx
{profile.githubSummary && (
  <div className="mt-6">
    <div className="flex justify-between items-center mb-2">
      <h3 className="text-lg font-medium">Public work summary</h3>
      <button
        onClick={() => setEditingSummary(true)}
        className="text-sm text-blue-600 hover:underline"
      >
        Edit
      </button>
    </div>
    <p className="text-xs text-gray-500 mb-3">
      This summary is based on publicly available project descriptions and can be edited.
    </p>
    <div className="whitespace-pre-wrap text-gray-700">
      {profile.githubSummary}
    </div>
  </div>
)}
```

### No Summary State

If `githubUrl` exists but no summary - show nothing. Don't explain why.

---

## Candidate Edit Page

**Location:** `app/candidate/profile/edit/page.tsx`

Only show if `githubSummaryGeneratedAt` exists:

```tsx
{profile.githubSummaryGeneratedAt && (
  <div className="form-group">
    <label className="block text-sm font-medium mb-1">
      Public work summary
    </label>
    <textarea
      value={summary}
      onChange={(e) => setSummary(e.target.value)}
      rows={6}
      className="w-full border rounded-md p-3"
    />
    <p className="text-xs text-gray-500 mt-1">
      This summary is based on publicly available project descriptions and can be edited.
    </p>
  </div>
)}
```

**Save via:**
```typescript
await fetch('/api/candidates/github-summary', {
  method: 'PUT',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ summary })
});
```

---

## Admin Candidate Page

**Location:** `app/admin/candidates/[id]/page.tsx`

### Generate Button

```tsx
{candidate.githubUrl && !candidate.githubSummary && (
  <button onClick={generateSummary}>
    Generate public work summary
  </button>
)}

{candidate.githubSummary && (
  <button onClick={generateSummary}>
    Regenerate
  </button>
)}
```

### Tooltip (optional)

```
Creates a short summary based on public project descriptions.
```

### Display

```tsx
{candidate.githubSummary && (
  <div className="mt-4">
    <h4 className="font-medium">Public work summary</h4>
    <div className="whitespace-pre-wrap text-gray-700 mt-2">
      {candidate.githubSummary}
    </div>
  </div>
)}
```

---

## Company / Shortlist Preview (Before Approval)

**Location:** `app/company/shortlists/[id]/page.tsx` (preview mode)

### Important: Do NOT show full summary before approval

The preview page is for directional confidence, not deep evaluation.
Showing the full summary gives away value before payment.

### What to show instead

A light signal that public work was reviewed:

```tsx
{candidate.hasPublicWorkSummary && (
  <div className="flex items-center gap-2 text-sm text-gray-600 mt-2">
    <CheckIcon className="w-4 h-4 text-green-500" />
    <span>Public project documentation reviewed</span>
  </div>
)}
```

### Optional: One neutral line (no bullets, no structure)

```tsx
{candidate.hasPublicWorkSummary && (
  <div className="text-sm text-gray-600 mt-2">
    <span className="text-green-600">âœ“</span> Public work suggests hands-on experience across web and mobile applications.
  </div>
)}
```

### Microcopy for unlock prompt

```
Full profiles unlock after approval, including detailed work summaries and project context.
```

---

## Company / Shortlist View (After Approval)

**Location:** `app/company/shortlists/[id]/page.tsx` (unlocked mode)

### Placement

- Inside candidate card
- Below experience / skills
- Not highlighted or emphasized

### Layout

```tsx
{candidate.githubSummary && (
  <div className="mt-4 pt-4 border-t">
    <h4 className="text-sm font-medium text-gray-600 mb-2">
      Public work summary
    </h4>
    <div className="text-sm text-gray-700 whitespace-pre-wrap">
      {candidate.githubSummary}
    </div>
  </div>
)}
```

### Behavior

- Only show full summary AFTER approval/unlock
- Render summary if available
- Do not show loading states
- If unavailable, render nothing (no placeholder)

---

## UX Constraints

1. **Never mention AI** - The source is irrelevant
2. **Never mention GitHub** - It's just "public work"
3. **No timestamps** - Don't show when generated
4. **Always show Edit** - Candidates must feel ownership
5. **No badges/icons** - Keep it plain text
6. **No explanation needed** - It's just context

The summary should read like something an internal recruiter wrote after reviewing public links.

---

## Implementation Checklist

### Admin Pages
- [ ] Add "Generate public work summary" button
- [ ] Display summary without timestamp
- [ ] Add "Regenerate" option for existing summaries

### Candidate Profile
- [ ] Display summary with "Edit" action
- [ ] Use title "Public work summary"
- [ ] Add description text
- [ ] Hide section entirely if no summary

### Candidate Edit
- [ ] Add textarea (only if summary exists)
- [ ] Save via PUT endpoint

### Company/Shortlist
- [ ] Display summary in candidate card
- [ ] Plain styling, no emphasis
- [ ] Hide if not available
